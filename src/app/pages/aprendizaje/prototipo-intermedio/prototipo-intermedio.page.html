<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Nivel Intermedio: Ensamble Detallado</ion-title>
    <ion-buttons slot="end">
      <ion-badge color="tertiary" mode="ios">
        {{ pasoActual + 1 }} / {{ pasos.length }}
      </ion-badge>
    </ion-buttons>
  </ion-toolbar>
  <ion-progress-bar [value]="(pasoActual + 1) / pasos.length" color="tertiary"></ion-progress-bar>
</ion-header>

<ion-content>
  
  <div class="split-layout">

    <div class="left-panel">
      <div class="visor-container">
        <div #threeContainer class="three-canvas"></div>
        <div class="visor-badge">
          <ion-icon name="cube-outline"></ion-icon> Visualizaci贸n 3D
        </div>
      </div>
    </div>

    <div class="right-panel">
      <div class="manual-card-content">
        
        <div class="step-info">
          <div class="tech-header">
            <ion-badge [color]="pasos[pasoActual].color" class="step-category">
              Fase {{ pasos[pasoActual].fase }}
            </ion-badge>
            <span class="step-tech-id">ID: {{ pasoActual + 101 }}</span>
          </div>
          
          <h2 class="step-title">{{ pasos[pasoActual].titulo }}</h2>
          
          <p class="step-desc">
            {{ pasos[pasoActual].descripcion }}
          </p>

          <div class="tech-specs" *ngIf="pasos[pasoActual].detalleTecnico">
            <strong>Especificaci贸n:</strong> {{ pasos[pasoActual].detalleTecnico }}
          </div>

          <div class="step-note" *ngIf="pasos[pasoActual].nota">
            <ion-icon name="warning-outline" slot="start"></ion-icon>
            <span>{{ pasos[pasoActual].nota }}</span>
          </div>
        </div>

        <div class="navigation-buttons">
          
          <ion-button 
            fill="outline" 
            color="medium"
            (click)="cambiarPaso(-1)" 
            [disabled]="pasoActual === 0">
            <ion-icon name="arrow-back"></ion-icon>
          </ion-button>

          <ion-button 
            expand="block" 
            class="flex-grow" 
            color="tertiary"
            (click)="cambiarPaso(1)">
            
            <span *ngIf="pasoActual < pasos.length - 1">Siguiente Instrucci贸n</span>
            <span *ngIf="pasoActual === pasos.length - 1">Finalizar M贸dulo</span>
            <ion-icon slot="end" name="arrow-forward" *ngIf="pasoActual < pasos.length - 1"></ion-icon>
            <ion-icon slot="end" name="checkmark-done-circle" *ngIf="pasoActual === pasos.length - 1"></ion-icon>
          
          </ion-button>

        </div>

      </div>
    </div>

  </div>

</ion-content>